<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta
      name="author"
      content="Mark Otto, Jacob Thornton, and Bootstrap contributors"
    />
    <meta name="generator" content="Astro v5.13.2" />
    <title>Home</title>
    <link
      rel="canonical"
      href="https://getbootstrap.com/docs/5.3/examples/navbar-fixed/"
    />
    <script src="js/color-modes.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: #0000001a;
        border: solid rgba(0, 0, 0, 0.15);
        border-width: 1px 0;
        box-shadow: inset 0 0.5em 1.5em #0000001a,
          inset 0 0.125em 0.5em #00000026;
      }
      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }
      .bi {
        vertical-align: -0.125em;
        fill: currentColor;
      }
      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }
      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }
      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;
        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }
      .bd-mode-toggle {
        z-index: 1500;
      }
      .bd-mode-toggle .bi {
        width: 1em;
        height: 1em;
      }
      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }
    </style>
  </head>
  <body>
    <div
      class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle"
    >
      <button
        class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        aria-label="Toggle theme (auto)"
      >
        <svg class="bi my-1 theme-icon-active" aria-hidden="true">
          <use href="#circle-half"></use>
        </svg>
        <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
      </button>
      <ul
        class="dropdown-menu dropdown-menu-end shadow"
        aria-labelledby="bd-theme-text"
      >
        <li>
          <button
            type="button"
            class="dropdown-item d-flex align-items-center"
            data-bs-theme-value="light"
            aria-pressed="false"
          >
            <svg class="bi me-2 opacity-50" aria-hidden="true">
              <use href="#sun-fill"></use>
            </svg>
            Light
            <svg class="bi ms-auto d-none" aria-hidden="true">
              <use href="#check2"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            type="button"
            class="dropdown-item d-flex align-items-center"
            data-bs-theme-value="dark"
            aria-pressed="false"
          >
            <svg class="bi me-2 opacity-50" aria-hidden="true">
              <use href="#moon-stars-fill"></use>
            </svg>
            Dark
            <svg class="bi ms-auto d-none" aria-hidden="true">
              <use href="#check2"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            type="button"
            class="dropdown-item d-flex align-items-center active"
            data-bs-theme-value="auto"
            aria-pressed="true"
          >
            <svg class="bi me-2 opacity-50" aria-hidden="true">
              <use href="#circle-half"></use>
            </svg>
            Auto
            <svg class="bi ms-auto d-none" aria-hidden="true">
              <use href="#check2"></use>
            </svg>
          </button>
        </li>
      </ul>
    </div>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Hospitales</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarCollapse"
          aria-controls="navbarCollapse"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="web28homehospitales.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="web28createhospital.html"
                >Nuevo Hospital</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">Disabled</a>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>
    <main class="container">
      <div class="bg-body-tertiary p-5 rounded">
        <h1 class="mt-3">Editar Hospital</h1>
        <input type="hidden" id="cajaid" class="form-control" />
        <label>Nombre</label>
        <input type="text" id="cajanombre" class="form-control" />
        <label>Dirección</label>
        <input type="text" id="cajadireccion" class="form-control" />
        <label>Teléfono</label>
        <input type="text" id="cajatelefono" class="form-control" />
        <label>Nº Camas</label>
        <input type="text" id="cajacamas" class="form-control" /><br />
        <button id="botonmodificar" class="btn btn-info">Modificar</button>
      </div>
    </main>
    <script src="js/bootstrap.bundle.min.js" class="astro-vvvwv3sm"></script>
    <script src="js/jquery-3.7.1.js"></script>
    <script>
      let url = "https://apicrudhospital.azurewebsites.net/";

      $(document).ready(function () {

        $("#botonmodificar").click(function() {
            let insertRequest = "webresources/hospitales/put";

            var idH = parseInt($("#cajaid").val());
            var camas = parseInt($("#cajacamas").val());
            var telefono = $("#cajatelefono");
            var direccion = $("#cajadireccion");
            var nombre = $("#cajanombre").val();

            var hospital = new Object();
            hospital.idhospital = idH;
            hospital.nombre = nombre;
            hospital.direccion = direccion;
            hospital.telefono = telefono;
            hospital.camas = camas;

            var hospitalJSON = JSON.stringify(hospital);
            console.log(hospitalJSON);

            $.ajax({
                url: url + insertRequest,
                type: "PUT",
                data: hospitalJSON,
                contentType: "application/json",
                success: function() {
                    console.log("Datos modificados con exito");
                    window.location.href = "web28detailshospital?id="+idH;
                }

            });
        });

        var params = new window.URLSearchParams(window.location.search);
        var idHospital = params.get("idhospital");
        console.log("Hospital con ID " + idHospital);
        let request = "webresources/hospitales/" + idHospital;

        $.ajax({
          url: url + request,
          type: "GET",
          success: function (data) {
            console.log("Leyendo datos del hospital...");
            console.log(data);
            $("#cajaid").val(data.idhospital);
            $("#cajanombre").val(data.nombre);
            $("#cajadireccion").val(data.direccion);
            $("#cajatelefono").val(data.telefono);
            $("#cajacamas").val(data.camas);
          },
        });
      });
    </script>
  </body>
</html>
