<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta
      name="author"
      content="Mark Otto, Jacob Thornton, and Bootstrap contributors"
    />
    <meta name="generator" content="Hugo 0.84.0" />
    <title>Lista de Doctores</title>

    <link
      rel="canonical"
      href="https://getbootstrap.com/docs/5.0/examples/sidebars/"
    />

    <!-- Bootstrap core CSS -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />

    <meta name="theme-color" content="#7952b3" />

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    <!-- Custom styles for this template -->
    <link href="css/sidebars.css" rel="stylesheet" />
  </head>
  <body>
    <main>
      <div
        class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark"
        style="width: 280px"
      >
        <a
          href="web29homedoctores.html"
          class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="32"
            fill="currentColor"
            class="bi bi-h-square-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm9 4.002V12H9.67V8.455H6.33V12H5V4.002h1.33v3.322h3.34V4.002z"
            />
          </svg>
          <span class="fs-4">Doctores</span>
        </a>
        <hr />
        <ul class="nav nav-pills flex-column mb-auto">
          <li>
            <a href="web29homedoctores.html" class="nav-link text-white">
              Home
            </a>
          </li>
          <li class="nav-item">
            <a
              href="web29createdoctor.html"
              class="nav-link active"
              aria-current="page"
            >
              A単adir
            </a>
          </li>
        </ul>
        <hr />
      </div>

      <div class="b-example-divider"></div>
      <div class="container p-3">
        <div class="container bg-dark p-3 rounded-2">
          <h1 class="text-white">Crear Doctor</h1>

          <label class="text-white">ID</label>
          <input id="cajaid" type="text" class="form-control" />
          <label class="text-white">ID Hospital</label>
          <input id="cajaidhospital" type="text" class="form-control" />
          <label class="text-white">Apellido</label>
          <input id="cajaapellido" type="text" class="form-control" />
          <label class="text-white">Especialidad</label>
          <input id="cajaespecialidad" type="text" class="form-control" />
          <label class="text-white">Salario</label>
          <input id="cajasalario" type="text" class="form-control" />
          <button id="addDoctor" class="btn btn-success mt-2 w-100 fw-bold">
            A単adir
          </button>
        </div>
      </div>
    </main>

    <script src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/jquery-3.7.1.js"></script>
    <script src="js/sidebars.js"></script>
    <script>
      let url = "https://apicruddoctores.azurewebsites.net/";

      $(document).ready(function () {
        $("#addDoctor").click(function () {
          var request = "api/Doctores/";
          var id = parseInt($("#cajaid").val());
          var idh = parseInt($("#cajaidhospital").val());
          var apellido = $("#cajaapellido").val();
          var especialidad = $("#cajaespecialidad").val();
          var salario = parseInt($("#cajasalario").val());

          var doctor = new Object();

          doctor.idDoctor = id;
          doctor.idHospital = idh;
          doctor.apellido = apellido;
          doctor.especialidad = especialidad;
          doctor.salario = salario;

          var doctorJSON = JSON.stringify(doctor);
          console.log(doctorJSON);
          console.log("A単adiendo nuevo doctor...");

          $.ajax({
            url: url + request,
            type: "POST",
            contentType: "application/json",
            data: doctorJSON,
            success: function () {
              console.log("Nuevo doctor a単adido.");
              window.location.href = "web29homedoctores.html";
            },
          });
        });
      });
    </script>
  </body>
</html>
